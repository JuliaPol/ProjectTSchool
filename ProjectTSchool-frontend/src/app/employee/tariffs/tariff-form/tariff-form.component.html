<clr-modal [(clrModalOpen)]="open">
  <h3 class="modal-title">New tariff:</h3>
  <div class="modal-body">
    <form #formPage="ngForm">
      <div class="form-group">
        <label class="required ">Name:</label>
        <label for="nameInput" aria-haspopup="true" role="tooltip"
               [class.invalid]="name.touched && !name.valid"
               class="tooltip tooltip-validation tooltip-sm tooltip-bottom-right">
          <input type="text" id="nameInput" required [(ngModel)]="tariff.name" maxlength="35"
                 name="name" #name="ngModel">
          <span class="tooltip-content">Name is required!</span>
        </label>
      </div>
      <div class="form-group">
        <label class="required ">Description:</label>
        <label for="descrInput" aria-haspopup="true" role="tooltip"
               [class.invalid]="description.touched && !description.valid"
               class="tooltip tooltip-validation tooltip-md tooltip-top-left">
          <input type="text" id="descrInput" required [(ngModel)]="tariff.description" maxlength="100"
                 name="description" #description="ngModel">
          <span class="tooltip-content">Invalid description!</span>
        </label>
      </div>
      <div class="form-group">
        <label class="required ">Cost:</label>
        <label for="costInput" aria-haspopup="true" role="tooltip"
               [class.invalid]="cost.touched && !cost.valid"
               class="tooltip tooltip-validation tooltip-md tooltip-top-left">
          <input type="text" id="costInput" required pattern="[1-9]\d{0,9}$" [(ngModel)]="tariff.cost" maxlength="11"
                 name="cost" #cost="ngModel">
          <span class="tooltip-content">Invalid cost!</span>
        </label>
      </div>
      <div class="form-group">
        <label class="required ">SMS: </label>
        <label for="smsInput" aria-haspopup="true" role="tooltip"
               [class.invalid]="sms.touched && !sms.valid"
               class="tooltip tooltip-validation tooltip-md tooltip-top-left">
          <input type="text" id="smsInput" required pattern="[1-9]\d{0,9}$" [(ngModel)]="tariff.sms" maxlength="11"
                 name="sms" #sms="ngModel">
          <span class="tooltip-content">Invalid sms!</span>
        </label>
      </div>
      <div class="form-group">
        <label class="required ">Number of minutes for outgoing calls: </label>
        <label for="callsInput" aria-haspopup="true" role="tooltip"
               [class.invalid]="calls.touched && !calls.valid"
               class="tooltip tooltip-validation tooltip-md tooltip-top-left">
          <input type="text" id="callsInput" required pattern="[1-9]\d{0,9}$" [(ngModel)]="tariff.calls" maxlength="11"
                 name="calls" #calls="ngModel">
          <span class="tooltip-content">Invalid field!</span>
        </label>
      </div>
      <div class="form-group">
        <label class="required ">Mobile Internet: </label>
        <label for="intInput" aria-haspopup="true" role="tooltip"
               [class.invalid]="internet.touched && !internet.valid"
               class="tooltip tooltip-validation tooltip-md tooltip-top-left">
          <input type="text" id="intInput" required pattern="[1-9]\d{0,9}$" [(ngModel)]="tariff.internet" maxlength="11"
                 name="internet" #internet="ngModel">
          <span class="tooltip-content">Invalid field!</span>
        </label>
      </div>
    </form>
    <ng-container *ngIf="loading">
      <p>Loading...</p>
      <div class="progress loop">
        <progress></progress>
      </div>
    </ng-container>
    <clr-alert *ngIf="finish && !errorFlag" clrAlertType="alert-success">
      <div class="alert-item">
        Tariff have successfully added.
      </div>
    </clr-alert>
    <clr-alert *ngIf="finish && errorFlag" clrAlertType="alert-danger">
      <div class="alert-item">
        Error. The tariff name must be original.
      </div>
    </clr-alert>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline" (click)="reset()">Cancel</button>
    <button *ngIf="finish" type="button" class="btn btn-outline" (click)="exit()">Ok</button>
    <button *ngIf="!finish" type="button" class="btn btn-primary" (click)="onSubmit()"
            [disabled]="formPage.form.invalid">Add
    </button>
  </div>
</clr-modal>
